(this["webpackJsonpweatherapp-frontend"]=this["webpackJsonpweatherapp-frontend"]||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),u=n(2),i=n.n(u),l=n(3),s=n(4),p=n(5),f=n.n(p),m={getWeatherFromApi:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.latitude,a=t.longitude,e.next=3,f.a.get("".concat("http://0.0.0.0:9000/api","/weather/").concat(n,"/").concat(a));case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h={getCity:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.latitude,a=t.longitude,e.next=3,f.a.get("".concat("http://0.0.0.0:9000/api","/city/").concat(n,"/").concat(a));case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=function(e){var t=e.forecastData,n=e.timeConverter,a=t.weather[0].main,c=t.weather[0].icon.slice(0,-1),o="".concat(Math.round(10*t.temp)/10," \xb0C");return r.a.createElement("li",null,r.a.createElement("p",null,n(t.dt).slice(-5),": ",o," -"," ",r.a.createElement("b",null,a)),r.a.createElement("img",{src:"../img/".concat(c,".svg"),className:"forecastImage",alt:'Icon for "'.concat(a,'"')}))},g=function(e){var t=e.city,n=e.current,a=e.hourly,c=function(e){var t=new Date(1e3*e);return"".concat(t.getDate()," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ").concat(t.getFullYear()," - ").concat(t.getHours(),":").concat(t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes())},o=n.weather[0].icon.slice(0,-1),u=n.weather[0].main,i=c(n.dt);return r.a.createElement("div",null,r.a.createElement("div",{className:"weather"},t?r.a.createElement("h2",null,"Weather conditions in ",t):r.a.createElement("h2",null,"Weather conditions in your location:"),u&&r.a.createElement("p",{align:"center"},i," - ",r.a.createElement("b",null,u)),o&&r.a.createElement("img",{src:"../img/".concat(o,".svg"),alt:'Icon for "'.concat(u,'"')})),r.a.createElement("div",{className:"forecast"},r.a.createElement("h3",null,"Later:"),r.a.createElement("ul",null,a&&a.map((function(e){return r.a.createElement(d,{key:e.dt,forecastData:e,timeConverter:c})})))))},v=function(e){var t=e.message;return null===t?null:r.a.createElement("p",{className:"alert"},t)},b=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)({}),u=Object(s.a)(o,2),p=u[0],f=u[1],d=Object(a.useState)({}),b=Object(s.a)(d,2),E=b[0],w=b[1],y=Object(a.useState)("..."),O=Object(s.a)(y,2),j=O[0],k=O[1];return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){w({latitude:e.coords.latitude,longitude:e.coords.longitude})}),(function(e){var t="Enable location to use the service. Error: ".concat(e.message);c(t)})):("Geolocation is not supported by your browser",c("Geolocation is not supported by your browser"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E.latitude||!E.longitude){e.next=13;break}return e.prev=1,e.next=4,m.getWeatherFromApi(E);case 4:t=e.sent,n={current:t.current,hourly:t.hourly},f(n),c(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),c("Backend error occurred: ".concat(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()()}),[E]),Object(a.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E.latitude||!E.longitude){e.next=11;break}return e.prev=1,e.next=4,h.getCity(E);case 4:t=e.sent.city,k(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),k(null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[p]),r.a.createElement("div",null,n&&r.a.createElement(v,{message:n}),E.latitude&&E.longitude&&p.current?r.a.createElement(g,{location:E,city:j,current:p.current,hourly:p.hourly}):n?r.a.createElement("h2",null,"Unable to continue to the service."):r.a.createElement("h2",null,"Please wait..."))};o.a.render(r.a.createElement(b,null),document.getElementById("app"))}},[[39,1,2]]]);
//# sourceMappingURL=main.00b9dc29.chunk.js.map